<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PENA BLVD Travel Time Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #0a0a0a;
            color: #ffffff;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #1a1a1a;
            border-radius: 10px;
        }
        h1 {
            margin: 0;
            color: white;
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 5px;
        }
        .subtitle {
            color: #999;
            font-size: 13px;
        }
        .info-box {
            background-color: #2a2a2a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        .info-box p {
            margin: 5px 0;
            color: #FFA500;
        }
        .charts-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            background-color: #1a1a1a;
            padding: 20px;
            border-radius: 10px;
        }
        @media (max-width: 1200px) {
            .charts-wrapper {
                grid-template-columns: 1fr;
            }
        }
        .chart-container {
            background-color: #0a0a0a;
            padding: 20px;
            border-radius: 8px;
            position: relative;
            height: 400px;
        }
        .chart-title {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            font-weight: 500;
            color: #ffffff;
            z-index: 10;
        }
        canvas {
            width: 100% !important;
            height: 350px !important;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 20px;
            padding: 15px;
            background-color: #1a1a1a;
            border-radius: 8px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }
        .legend-color {
            width: 20px;
            height: 12px;
            border-radius: 2px;
        }
        .legend-line {
            width: 20px;
            height: 2px;
            background-color: #FFA500;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Travel time for PENA BLVD</h1>
            <div class="subtitle">Averaged per fifteen minutes for January 01, 2024 through December 31, 2024 (Every weekday)</div>
        </div>
        
        <div class="info-box">
            <p>üìä This visualization shows the statistical distribution of travel times across all weekdays in 2024</p>
            <p>‚è≥ Waiting for October 30, 2024 data to be added for specific day comparison</p>
        </div>

        <div class="charts-wrapper">
            <div class="chart-container">
                <div class="chart-title">Northbound</div>
                <canvas id="northboundChart"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">Southbound</div>
                <canvas id="southboundChart"></canvas>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-line" style="background-color: #FFA500; height: 3px;"></div>
                <span>Average (All Weekdays)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(180deg, rgba(139, 69, 19, 0.3) 0%, rgba(139, 69, 19, 0.1) 100%);"></div>
                <span>5% - 95% Range</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: rgba(139, 69, 19, 0.5);"></div>
                <span>25% - 75% Range</span>
            </div>
        </div>
    </div>

    <script>
        // Actual data from the XML file - these are the statistical values for all weekdays
        const timeIntervals = [
            "12:00 AM", "12:15 AM", "12:30 AM", "12:45 AM", "1:00 AM", "1:15 AM", "1:30 AM", "1:45 AM",
            "2:00 AM", "2:15 AM", "2:30 AM", "2:45 AM", "3:00 AM", "3:15 AM", "3:30 AM", "3:45 AM",
            "4:00 AM", "4:15 AM", "4:30 AM", "4:45 AM", "5:00 AM", "5:15 AM", "5:30 AM", "5:45 AM",
            "6:00 AM", "6:15 AM", "6:30 AM", "6:45 AM", "7:00 AM", "7:15 AM", "7:30 AM", "7:45 AM",
            "8:00 AM", "8:15 AM", "8:30 AM", "8:45 AM", "9:00 AM", "9:15 AM", "9:30 AM", "9:45 AM",
            "10:00 AM", "10:15 AM", "10:30 AM", "10:45 AM", "11:00 AM", "11:15 AM", "11:30 AM", "11:45 AM",
            "12:00 PM", "12:15 PM", "12:30 PM", "12:45 PM", "1:00 PM", "1:15 PM", "1:30 PM", "1:45 PM",
            "2:00 PM", "2:15 PM", "2:30 PM", "2:45 PM", "3:00 PM", "3:15 PM", "3:30 PM", "3:45 PM",
            "4:00 PM", "4:15 PM", "4:30 PM", "4:45 PM", "5:00 PM", "5:15 PM", "5:30 PM", "5:45 PM",
            "6:00 PM", "6:15 PM", "6:30 PM", "6:45 PM", "7:00 PM", "7:15 PM", "7:30 PM", "7:45 PM",
            "8:00 PM", "8:15 PM", "8:30 PM", "8:45 PM", "9:00 PM", "9:15 PM", "9:30 PM", "9:45 PM",
            "10:00 PM", "10:15 PM", "10:30 PM", "10:45 PM", "11:00 PM", "11:15 PM", "11:30 PM", "11:45 PM"
        ];

        // Data extracted directly from your XML file
        const northboundStats = {
            mean: [15.32, 15.29, 15.26, 14.99, 15.0, 15.21, 15.29, 15.25, 15.17, 15.19, 15.1, 14.9, 14.68, 14.57, 14.47, 14.36, 14.39, 14.43, 14.47, 14.52, 14.57, 14.66, 14.89, 15.23, 15.6, 15.99, 16.33, 16.32, 15.83, 15.59, 15.75, 16.14, 16.22, 16.3, 16.21, 15.94, 15.55, 15.44, 15.47, 15.42, 15.29, 15.21, 15.21, 15.12, 15.09, 15.12, 15.38, 15.49, 15.44, 15.53, 15.57, 15.65, 15.7, 15.82, 16.02, 16.2, 16.27, 16.34, 16.4, 16.68, 16.86, 17.09, 17.39, 17.97, 18.11, 18.35, 18.34, 18.35, 18.18, 17.99, 17.62, 17.14, 16.57, 16.23, 15.86, 15.78, 15.71, 15.65, 15.69, 15.64, 15.58, 15.61, 15.62, 15.65, 15.71, 15.72, 15.72, 15.66, 15.67, 15.59, 15.5, 15.48, 15.45, 15.47, 15.48, 15.45],
            pct5: [13.87, 13.86, 13.87, 13.54, 13.52, 13.58, 13.72, 13.59, 13.6, 13.62, 13.61, 13.49, 13.3, 13.32, 13.2, 13.25, 13.41, 13.44, 13.47, 13.49, 13.49, 13.53, 13.65, 13.71, 13.72, 13.74, 13.83, 13.78, 13.75, 13.82, 13.91, 14.06, 13.93, 13.92, 13.9, 13.98, 13.87, 13.86, 13.77, 13.74, 13.81, 13.81, 13.84, 13.8, 13.79, 13.85, 13.9, 13.88, 13.85, 13.75, 13.85, 13.86, 13.91, 13.92, 13.99, 13.98, 13.94, 14.03, 14.06, 14.08, 14.11, 14.1, 14.14, 14.14, 14.12, 14.14, 14.16, 14.17, 14.16, 14.13, 14.24, 14.21, 14.02, 13.96, 13.93, 14.02, 14.0, 14.0, 14.12, 14.12, 14.13, 14.1, 14.09, 14.06, 14.09, 14.08, 14.09, 14.04, 14.05, 14.04, 14.02, 13.98, 13.93, 13.92, 13.93, 13.9],
            pct95: [17.1, 17.3, 17.41, 17.07, 17.18, 17.31, 17.59, 17.5, 17.3, 17.3, 17.25, 16.97, 16.58, 16.37, 16.21, 15.87, 15.78, 15.91, 16.0, 16.12, 16.12, 16.33, 17.08, 18.61, 19.95, 21.07, 21.33, 21.16, 20.2, 18.54, 19.06, 20.3, 20.39, 20.79, 20.66, 20.36, 19.08, 18.09, 18.43, 18.42, 17.86, 17.44, 17.22, 17.0, 16.97, 17.23, 18.01, 18.61, 18.48, 18.97, 18.8, 19.13, 19.42, 19.67, 20.43, 20.76, 20.94, 21.25, 21.22, 22.07, 22.07, 22.5, 22.99, 23.67, 23.9, 24.84, 25.37, 25.82, 26.05, 26.03, 25.14, 24.3, 22.52, 21.42, 19.53, 19.06, 18.71, 18.51, 18.32, 18.11, 17.85, 17.97, 18.01, 17.91, 18.18, 17.95, 18.22, 17.98, 18.01, 17.94, 17.94, 17.75, 17.67, 17.45, 17.51, 17.6],
            pct25: [14.53, 14.5, 14.51, 14.25, 14.09, 14.33, 14.52, 14.42, 14.41, 14.48, 14.34, 14.19, 13.94, 13.85, 13.72, 13.7, 13.74, 13.8, 13.84, 13.89, 13.87, 13.93, 14.08, 14.16, 14.18, 14.38, 14.52, 14.42, 14.38, 14.4, 14.55, 14.67, 14.58, 14.59, 14.57, 14.61, 14.44, 14.44, 14.39, 14.33, 14.28, 14.43, 14.43, 14.43, 14.43, 14.45, 14.54, 14.55, 14.5, 14.5, 14.55, 14.53, 14.52, 14.58, 14.56, 14.56, 14.71, 14.76, 14.74, 14.82, 14.82, 14.88, 14.95, 15.37, 15.33, 15.41, 15.33, 15.22, 15.09, 15.03, 14.97, 14.89, 14.8, 14.66, 14.59, 14.68, 14.65, 14.62, 14.79, 14.82, 14.75, 14.77, 14.71, 14.75, 14.74, 14.72, 14.74, 14.71, 14.67, 14.69, 14.64, 14.61, 14.56, 14.55, 14.54, 14.53],
            pct75: [15.62, 15.77, 15.78, 15.46, 15.5, 15.78, 15.89, 15.8, 15.66, 15.7, 15.77, 15.42, 15.17, 15.07, 14.9, 14.75, 14.67, 14.72, 14.76, 14.85, 14.83, 15.02, 15.13, 15.31, 15.62, 16.12, 16.67, 16.69, 15.75, 15.67, 16.17, 16.66, 16.83, 17.11, 16.98, 16.3, 15.58, 15.44, 15.51, 15.49, 15.37, 15.36, 15.38, 15.39, 15.37, 15.37, 15.63, 15.83, 15.74, 15.89, 15.95, 16.05, 16.02, 16.2, 16.58, 16.93, 17.02, 16.97, 17.41, 17.86, 18.23, 18.77, 18.98, 19.85, 19.93, 20.33, 20.32, 20.38, 20.25, 19.72, 18.98, 17.89, 17.05, 16.45, 16.08, 15.92, 15.74, 15.77, 15.95, 15.9, 15.86, 15.81, 15.78, 15.75, 15.92, 15.98, 15.83, 15.78, 15.81, 15.78, 15.72, 15.74, 15.69, 15.86, 15.86, 15.85]
        };

        const southboundStats = {
            mean: [14.86, 14.79, 14.79, 14.74, 14.69, 14.69, 14.69, 14.64, 14.73, 14.76, 14.74, 14.75, 14.7, 14.61, 14.52, 14.41, 14.26, 14.18, 14.2, 14.22, 14.31, 14.33, 14.33, 14.37, 14.49, 14.67, 14.91, 15.39, 15.86, 16.5, 17.29, 17.42, 16.89, 16.6, 16.75, 16.65, 16.07, 15.72, 15.85, 16.06, 15.74, 15.42, 15.6, 16.68, 18.04, 19.01, 18.81, 18.04, 17.04, 16.52, 16.79, 17.51, 18.16, 18.56, 18.08, 17.49, 16.83, 16.43, 16.66, 17.48, 18.51, 19.04, 18.99, 18.85, 17.77, 16.77, 16.3, 16.34, 16.85, 17.52, 17.86, 17.26, 16.19, 16.0, 16.77, 18.42, 19.37, 19.0, 17.64, 16.58, 16.11, 16.23, 16.17, 15.67, 15.13, 14.86, 14.74, 14.69, 14.69, 14.9, 15.1, 15.19, 15.02, 14.94, 14.93, 14.95],
            pct5: [13.29, 13.27, 13.27, 13.27, 13.2, 13.24, 13.28, 13.26, 13.27, 13.28, 13.25, 13.28, 13.27, 13.28, 13.28, 13.13, 13.01, 13.23, 13.16, 13.16, 13.2, 13.2, 13.23, 13.22, 13.26, 13.47, 13.56, 13.59, 13.6, 13.65, 13.67, 13.71, 13.68, 13.67, 13.79, 13.79, 13.74, 13.72, 13.62, 13.62, 13.56, 13.56, 13.68, 13.9, 14.02, 13.87, 13.79, 13.8, 13.65, 13.58, 13.73, 13.82, 13.81, 13.7, 13.61, 13.57, 13.59, 13.58, 13.72, 13.85, 14.06, 14.12, 14.09, 13.97, 13.89, 13.74, 13.78, 13.79, 13.97, 14.03, 13.97, 13.88, 13.67, 13.67, 13.85, 13.95, 13.95, 13.8, 13.69, 13.66, 13.8, 13.82, 13.79, 13.57, 13.51, 13.49, 13.46, 13.47, 13.47, 13.48, 13.53, 13.43, 13.33, 13.3, 13.41, 13.44],
            pct95: [16.58, 16.28, 16.28, 16.13, 16.15, 16.21, 16.22, 16.25, 16.55, 16.38, 16.72, 16.49, 16.48, 16.43, 16.43, 16.24, 15.86, 15.62, 15.63, 15.68, 15.8, 15.78, 15.66, 15.7, 15.84, 16.17, 17.13, 19.21, 21.5, 23.4, 24.53, 25.15, 24.51, 23.39, 23.19, 23.21, 21.83, 20.89, 22.24, 22.58, 21.86, 20.09, 20.56, 24.32, 26.91, 27.98, 27.39, 26.16, 24.53, 23.31, 23.62, 25.23, 26.28, 26.48, 25.47, 24.37, 23.47, 22.49, 23.47, 24.87, 25.93, 25.93, 26.78, 26.74, 25.5, 23.27, 22.29, 22.83, 23.89, 25.9, 26.54, 25.62, 23.09, 22.5, 25.03, 30.07, 31.74, 30.18, 25.82, 22.9, 21.74, 22.15, 22.08, 20.99, 19.17, 17.7, 16.95, 16.65, 16.61, 17.44, 18.34, 18.85, 18.32, 17.99, 17.35, 17.27],
            pct25: [13.83, 13.83, 13.81, 13.82, 13.76, 13.85, 13.84, 13.85, 13.9, 13.92, 13.9, 13.93, 13.94, 13.96, 13.89, 13.7, 13.66, 13.65, 13.66, 13.57, 13.73, 13.74, 13.75, 13.75, 13.81, 14.06, 14.09, 14.21, 14.28, 14.36, 14.5, 14.53, 14.4, 14.31, 14.49, 14.47, 14.37, 14.24, 14.22, 14.22, 14.16, 14.15, 14.31, 14.47, 14.63, 14.94, 14.73, 14.52, 14.27, 14.25, 14.28, 14.57, 14.62, 14.5, 14.45, 14.4, 14.27, 14.25, 14.31, 14.58, 14.9, 15.45, 15.23, 14.99, 14.61, 14.49, 14.42, 14.48, 14.54, 14.66, 14.65, 14.47, 14.33, 14.32, 14.43, 14.73, 14.75, 14.68, 14.4, 14.31, 14.3, 14.37, 14.37, 14.12, 14.0, 14.05, 13.88, 13.89, 13.92, 14.0, 13.98, 13.99, 13.88, 13.86, 13.84, 13.87],
            pct75: [14.65, 14.65, 14.64, 14.59, 14.82, 14.86, 14.9, 14.91, 15.04, 15.09, 15.11, 15.09, 15.12, 15.11, 14.94, 14.7, 14.57, 14.48, 14.49, 14.51, 14.55, 14.55, 14.49, 14.53, 14.62, 14.75, 15.05, 15.57, 16.27, 17.45, 19.38, 19.06, 17.81, 17.07, 17.33, 17.39, 16.11, 15.65, 15.85, 16.14, 15.63, 15.39, 15.52, 17.27, 20.07, 21.25, 21.12, 20.32, 18.65, 17.74, 18.24, 19.42, 20.21, 20.79, 20.2, 19.55, 18.65, 17.87, 18.13, 19.17, 20.34, 21.09, 21.08, 20.69, 19.41, 17.98, 17.04, 16.98, 17.46, 18.72, 19.53, 18.63, 16.68, 16.05, 17.1, 20.11, 21.27, 21.05, 19.33, 17.16, 15.8, 15.96, 16.29, 15.59, 15.12, 15.02, 14.98, 14.83, 14.86, 15.14, 15.01, 14.92, 14.81, 14.79, 14.69, 14.69]
        };

        function createChart(canvasId, stats) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: true,
                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#FFA500',
                        borderWidth: 1,
                        padding: 8,
                        displayColors: true,
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += context.parsed.y.toFixed(1) + ' min';
                                }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.03)',
                            drawBorder: true,
                            borderColor: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#999',
                            font: {
                                size: 10
                            },
                            maxRotation: 0,
                            autoSkip: true,
                            maxTicksLimit: 12,
                            callback: function(value, index, values) {
                                // Show every 2 hours
                                if (index % 8 === 0) {
                                    return this.getLabelForValue(value);
                                }
                                return '';
                            }
                        }
                    },
                    y: {
                        min: 0,
                        max: 35,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.03)',
                            drawBorder: true,
                            borderColor: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#999',
                            stepSize: 5,
                            font: {
                                size: 10
                            }
                        },
                        title: {
                            display: true,
                            text: 'Travel time (minutes)',
                            color: '#999',
                            font: {
                                size: 11
                            }
                        }
                    }
                }
            };

            const datasets = [
                // 5th percentile (bottom of outer band)
                {
                    label: '5th Percentile',
                    data: stats.pct5,
                    borderColor: 'transparent',
                    backgroundColor: 'transparent',
                    fill: false,
                    pointRadius: 0,
                    tension: 0.3
                },
                // 95th percentile (top of outer band) - fills down to 5th percentile
                {
                    label: '95th Percentile',
                    data: stats.pct95,
                    borderColor: 'transparent',
                    backgroundColor: 'rgba(139, 69, 19, 0.2)',
                    fill: '-1',
                    pointRadius: 0,
                    tension: 0.3
                },
                // 25th percentile (bottom of inner band)
                {
                    label: '25th Percentile',
                    data: stats.pct25,
                    borderColor: 'transparent',
                    backgroundColor: 'transparent',
                    fill: false,
                    pointRadius: 0,
                    tension: 0.3
                },
                // 75th percentile (top of inner band) - fills down to 25th percentile
                {
                    label: '75th Percentile',
                    data: stats.pct75,
                    borderColor: 'transparent',
                    backgroundColor: 'rgba(139, 69, 19, 0.4)',
                    fill: '-1',
                    pointRadius: 0,
                    tension: 0.3
                },
                // Mean line
                {
                    label: 'Average',
                    data: stats.mean,
                    borderColor: '#FFA500',
                    backgroundColor: 'transparent',
                    borderWidth: 2.5,
                    fill: false,
                    pointRadius: 0,
                    pointHoverRadius: 4,
                    pointHoverBackgroundColor: '#FFA500',
                    tension: 0.3
                }
            ];

            return new Chart(ctx, {
                type: 'line',
                data: {
                    labels: timeIntervals,
                    datasets: datasets
                },
                options: chartOptions
            });
        }

        // Create both charts
        const northboundChart = createChart('northboundChart', northboundStats);
        const southboundChart = createChart('southboundChart', southboundStats);

        // Placeholder function to add October 30 data when available
        window.addOctober30Data = function(northboundData, southboundData) {
            // Add October 30 data as a new dataset
            const oct30NorthDataset = {
                label: 'October 30, 2024',
                data: northboundData,
                borderColor: '#FF1493',
                backgroundColor: 'transparent',
                borderWidth: 2,
                fill: false,
                pointRadius: 0,
                pointHoverRadius: 4,
                pointHoverBackgroundColor: '#FF1493',
                tension: 0.3
            };
            
            const oct30SouthDataset = {
                label: 'October 30, 2024',
                data: southboundData,
                borderColor: '#FF1493',
                backgroundColor: 'transparent',
                borderWidth: 2,
                fill: false,
                pointRadius: 0,
                pointHoverRadius: 4,
                pointHoverBackgroundColor: '#FF1493',
                tension: 0.3
            };
            
            northboundChart.data.datasets.push(oct30NorthDataset);
            southboundChart.data.datasets.push(oct30SouthDataset);
            
            northboundChart.update();
            southboundChart.update();
            
            // Update info box
            document.querySelector('.info-box').innerHTML = 
                '<p style="color: #00FF00;">‚úÖ October 30, 2024 data has been added!</p>' +
                '<p>The pink line shows October 30 travel times compared to the year average</p>';
        };
    </script>
</body>
</html>